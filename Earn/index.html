<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earn & Swap - Cronos Legends</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #fff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .particle {
            position: absolute;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.4) 0%, transparent 70%);
            border-radius: 50%;
            animation: float 15s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.3; }
            50% { transform: translate(50px, -50px) scale(1.2); opacity: 0.6; }
        }

        /* Meteor effect */
        .meteor {
            position: absolute;
            width: 3px;
            height: 80px;
            background: linear-gradient(to bottom, rgba(255, 215, 0, 1), transparent);
            animation: meteor-fall 3s ease-in infinite;
            opacity: 0;
        }

        @keyframes meteor-fall {
            0% { 
                transform: translate(0, -100px) rotate(-45deg);
                opacity: 1;
            }
            100% { 
                transform: translate(200px, 300px) rotate(-45deg);
                opacity: 0;
            }
        }

        /* Navigation Bar - NEW UPDATED VERSION */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid rgba(255, 215, 0, 0.2);
            padding: 20px 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .navbar.scrolled {
            padding: 15px 0;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            font-weight: 900;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-decoration: none;
            letter-spacing: 2px;
        }

        .nav-links {
            display: flex;
            gap: 40px;
            align-items: center;
            list-style: none;
        }

        .nav-links li {
            position: relative;
        }

        .nav-links a {
            color: #ccc;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            position: relative;
            display: block;
            padding: 10px 0;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            transition: width 0.3s ease;
        }

        .nav-links a:hover {
            color: #FFD700;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Dropdown Menu */
        .dropdown {
            position: relative;
        }

        .dropdown-toggle {
            cursor: pointer;
        }

        .dropdown-toggle::before {
            content: '‚ñº';
            font-size: 0.7rem;
            margin-left: 5px;
            transition: transform 0.3s ease;
        }

        .dropdown:hover .dropdown-toggle::before {
            transform: rotate(180deg);
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: rgba(20, 20, 20, 0.98);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 215, 0, 0.2);
            border-radius: 10px;
            padding: 15px 0;
            min-width: 250px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .dropdown:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-menu li {
            list-style: none;
        }

        .dropdown-menu a {
            padding: 12px 25px;
            color: #ccc;
            display: block;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .dropdown-menu a::after {
            display: none;
        }

        .dropdown-menu a:hover {
            background: rgba(255, 215, 0, 0.1);
            color: #FFD700;
            padding-left: 30px;
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: 2px solid #FFD700;
            color: #FFD700;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 8px 15px;
            border-radius: 5px;
        }

        @media (max-width: 968px) {
            .nav-links {
                position: fixed;
                top: 80px;
                left: -100%;
                flex-direction: column;
                background: rgba(10, 10, 10, 0.98);
                width: 100%;
                padding: 40px 20px;
                gap: 30px;
                transition: left 0.3s ease;
                border-bottom: 2px solid rgba(255, 215, 0, 0.2);
                align-items: flex-start;
            }

            .nav-links.active {
                left: 0;
            }

            .mobile-menu-toggle {
                display: block;
            }

            .dropdown-menu {
                position: static;
                opacity: 1;
                visibility: visible;
                transform: none;
                border: none;
                background: transparent;
                padding: 10px 0 0 20px;
                display: none;
            }

            .dropdown:hover .dropdown-menu,
            .dropdown.active .dropdown-menu {
                display: block;
            }

            .dropdown-toggle {
                width: 100%;
            }
        }

        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 60px 20px;
            position: relative;
            z-index: 1;
            margin-top: 80px;
        }

        .hero {
            text-align: center;
            margin-bottom: 60px;
        }

        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 40px rgba(255, 215, 0, 0.3);
        }

        .hero p {
            font-size: 20px;
            color: #ccc;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Section Headers */
        .section-header {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05));
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin: 60px 0 30px;
            position: relative;
            overflow: hidden;
        }

        .section-header h2 {
            font-size: 36px;
            color: #ffd700;
            margin-bottom: 10px;
        }

        .section-header p {
            font-size: 16px;
            color: #ddd;
        }

        /* Swap Cards */
        .swap-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .swap-card {
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.9), rgba(22, 33, 62, 0.9));
            border: 2px solid rgba(255, 215, 0, 0.2);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .swap-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 215, 0, 0.6);
            box-shadow: 0 10px 40px rgba(255, 215, 0, 0.3);
        }

        .swap-card.meteor-card {
            overflow: visible;
        }

        .swap-card h3 {
            font-size: 20px;
            color: #ffd700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .swap-card .icon {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #000;
            font-size: 14px;
        }

        .swap-rate {
            font-size: 20px;
            color: #fff;
            margin: 15px 0;
            font-weight: bold;
        }

        .token-badge {
            display: inline-block;
            padding: 5px 15px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 215, 0, 0.1));
            border: 1px solid rgba(255, 215, 0, 0.4);
            border-radius: 20px;
            font-size: 14px;
            color: #ffd700;
            font-weight: 600;
        }

        .tba {
            color: #ffa500;
            font-style: italic;
        }

        .coming-soon {
            opacity: 0.6;
            position: relative;
        }

        .coming-soon::before {
            content: 'COMING SOON';
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 165, 0, 0.3);
            border: 1px solid #ffa500;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 11px;
            color: #ffa500;
            font-weight: bold;
        }

        /* Card background image styling */
        .card-bg-image {
            position: absolute;
            top: 0;
            right: 0;
            width: 180px;
            height: 180px;
            opacity: 0.20;
            pointer-events: none;
            z-index: 0;
            border-radius: 15px;
        }

        .card-bg-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(1.3) saturate(1.2);
            border-radius: 15px;
        }

        .card-content {
            position: relative;
            z-index: 1;
        }

        /* Treasury Section */
        .treasury-section {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 212, 255, 0.05));
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 40px;
        }

        .treasury-totals {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .total-box {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(0, 212, 255, 0.4);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .total-label {
            color: #888;
            font-size: 12px;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .total-value {
            color: #00d4ff;
            font-size: 32px;
            font-weight: bold;
        }

        .funds-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .fund-item {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 8px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .fund-item:hover {
            border-color: rgba(0, 212, 255, 0.6);
            background: rgba(0, 212, 255, 0.1);
        }

        .fund-label {
            color: #00d4ff;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .token-logo {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            object-fit: cover;
        }

        .fund-value {
            color: #fff;
            font-size: 16px;
            font-weight: bold;
        }

        .fund-usd {
            color: #00d4ff;
            font-size: 14px;
            font-weight: 500;
        }

        /* NFT Cards */
        .nft-card {
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.9), rgba(22, 33, 62, 0.9));
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 15px;
            padding: 0;
            overflow: hidden;
            transition: all 0.3s;
        }

        .nft-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 215, 0, 0.6);
            box-shadow: 0 10px 40px rgba(255, 215, 0, 0.3);
        }

        .nft-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            background: rgba(0, 0, 0, 0.5);
            display: block;
        }

        .nft-info {
            padding: 15px;
        }

        .nft-name {
            color: #ffd700;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .nft-id {
            color: #888;
            font-size: 12px;
        }

        .nft-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        /* Partner Cards */
        .partner-card {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.1), rgba(75, 0, 130, 0.05));
            border-color: rgba(138, 43, 226, 0.3);
        }

        .partner-card:hover {
            border-color: rgba(138, 43, 226, 0.6);
            box-shadow: 0 10px 40px rgba(138, 43, 226, 0.3);
        }

        /* Buttons */
        .swap-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            border: none;
            border-radius: 10px;
            color: #000;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .swap-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5);
        }

        .info-box {
            background: rgba(255, 215, 0, 0.1);
            border-left: 4px solid #ffd700;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
        }

        .info-box h4 {
            color: #ffd700;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .info-box ul {
            margin-left: 20px;
            color: #ddd;
            line-height: 1.8;
        }

        /* Footer - NEW UPDATED VERSION */
        .footer {
            background: rgba(5, 5, 5, 0.9);
            border-top: 2px solid rgba(255, 215, 0, 0.2);
            padding: 40px 20px 30px;
            text-align: center;
        }

        .footer-links {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
        }

        .footer-links a {
            color: #999;
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: #FFD700;
        }

        .footer p {
            color: #666;
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 36px;
            }

            .section-header h2 {
                font-size: 28px;
            }

            .swap-grid {
                grid-template-columns: 1fr;
            }

            .total-value {
                font-size: 24px;
            }

            .card-bg-image {
                width: 120px;
                height: 120px;
                opacity: 0.18;
            }
        }
    </style>
</head>
<body>
    <!-- Animated particles -->
    <div class="particles" id="particles"></div>

    <!-- Navigation Bar - NEW STRUCTURE -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="/" class="nav-logo">CRONOS LEGENDS</a>
            <ul class="nav-links" id="navLinks">
                <li><a href="/">Home</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">NFT Collection</a>
                    <ul class="dropdown-menu">
                        <li><a href="/legends-awaken-2/">Legends Awaken II</a></li>
                        <li><a href="/legends-awaken-1/">Legends Awaken I</a></li>
                        <li><a href="/totems/">Totems</a></li>
                    </ul>
                </li>
                <li><a href="/tokens/">Tokens</a></li>
                <li><a href="/Earn/">Earn & Swap</a></li>
                <li><a href="/game/">Game</a></li>
                <li><a href="/roadmap/">Roadmap</a></li>
                <li><a href="/faq/">FAQ</a></li>
            </ul>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">‚ò∞</button>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <div class="hero">
            <h1>Earn & Swap</h1>
            <p>Trade your Cronos Legends NFTs for ecosystem tokens. Build your portfolio and participate in our growing economy.</p>
        </div>

        <!-- ========================================
             TREASURY SECTION (TOP)
        ======================================== -->
        <div class="treasury-section">
            <h2 style="color: #00d4ff; font-size: 32px; margin-bottom: 20px; text-align: center;">üí∞ Community Treasury</h2>
            <p style="text-align: center; color: #ddd; margin-bottom: 30px;">
                Transparent on-chain holdings. All transactions are publicly verifiable on the Cronos blockchain.
            </p>

            <!-- Treasury Totals -->
            <div class="treasury-totals">
                <div class="total-box">
                    <div class="total-label">Ecosystem Holdings</div>
                    <div class="total-value" id="total-value">$0.00</div>
                </div>
                <div class="total-box" style="border-color: rgba(138, 43, 226, 0.4);">
                    <div class="total-label">Partner & Other Holdings</div>
                    <div class="total-value" id="partner-total-value" style="color: #BA55D3;">$0.00</div>
                </div>
                <div class="total-box" style="border-color: rgba(255, 215, 0, 0.4);">
                    <div class="total-label">Grand Total</div>
                    <div class="total-value" id="grand-total-value" style="color: #ffd700;">$0.00</div>
                </div>
            </div>

            <!-- Wallet Address -->
            <div style="padding: 20px; background: rgba(0, 0, 0, 0.3); border-radius: 10px; border: 1px solid rgba(0, 212, 255, 0.2); margin-bottom: 20px;">
                <p style="color: #888; font-size: 12px; margin-bottom: 8px;">WALLET ADDRESS</p>
                <p style="color: #00d4ff; font-size: 14px; word-break: break-all; font-family: monospace; margin-bottom: 15px;">
                    0xaf87e4df58d735ec2971d2d8db663b02ca60175d
                </p>
                <button class="swap-btn" onclick="viewTreasury()" style="background: linear-gradient(135deg, #00d4ff, #00a8cc);">
                    üîç View on Cronos Explorer
                </button>
            </div>

            <!-- Token Holdings -->
            <h4 style="color: #00d4ff; font-size: 18px; margin-bottom: 15px;">Ecosystem Token Holdings</h4>
            <div class="funds-grid">
                <div class="fund-item" data-token="CRO" style="border-color: rgba(0, 132, 255, 0.6); background: rgba(0, 132, 255, 0.05);">
                    <span class="fund-label" style="color: #0084ff;">üíé $CRO</span>
                    <span class="fund-value">Loading...</span>
                    <span class="fund-usd" style="color: #0084ff;">$0.00</span>
                </div>
                
                <div class="fund-item" data-token="CLG" style="border-color: rgba(255, 215, 0, 0.6); background: rgba(255, 215, 0, 0.05);">
                    <span class="fund-label" style="color: #ffd700;">üíõ $CLG</span>
                    <span class="fund-value">Loading...</span>
                    <span class="fund-usd" style="color: #ffd700;">$0.00</span>
                </div>
                
                <div class="fund-item" data-token="TRI" style="border-color: rgba(34, 197, 94, 0.6); background: rgba(34, 197, 94, 0.05);">
                    <span class="fund-label" style="color: #22c55e;">üåø $TRI</span>
                    <span class="fund-value">Loading...</span>
                    <span class="fund-usd" style="color: #22c55e;">$0.00</span>
                </div>
                
                <div class="fund-item" data-token="LYRA" style="border-color: rgba(239, 68, 68, 0.6); background: rgba(239, 68, 68, 0.05);">
                    <span class="fund-label" style="color: #ef4444;">ü©∏ $LYRA</span>
                    <span class="fund-value">Loading...</span>
                    <span class="fund-usd" style="color: #ef4444;">$0.00</span>
                </div>
                
                <div class="fund-item" data-token="CARA" style="border-color: rgba(236, 72, 153, 0.6); background: rgba(236, 72, 153, 0.05);">
                    <span class="fund-label" style="color: #ec4899;">üå∏ $CARA</span>
                    <span class="fund-value">Loading...</span>
                    <span class="fund-usd" style="color: #ec4899;">$0.00</span>
                </div>
            </div>

            <!-- Partner & Other Token Holdings (Combined) -->
            <h4 style="color: #9333ea; font-size: 18px; margin: 30px 0 15px;">ü§ù Partner & Other Token Holdings</h4>
            <div style="background: linear-gradient(135deg, rgba(147, 51, 234, 0.08), rgba(245, 158, 11, 0.05)); padding: 20px; border-radius: 10px; border: 1px solid rgba(147, 51, 234, 0.3);">
                <div class="funds-grid" id="combined-tokens-grid">
                    <!-- Populated dynamically, sorted by USD value -->
                </div>
            </div>

            <!-- NFT Status Message -->
            <div style="text-align: center; margin: 40px 0 20px;">
                <div style="background: rgba(255, 215, 0, 0.1); border: 2px solid rgba(255, 215, 0, 0.3); border-radius: 15px; padding: 25px; max-width: 900px; margin: 0 auto;">
                    <p style="color: #ffd700; font-size: 18px; font-weight: bold; margin: 0 0 20px 0;">
                        üé¥ Legends Awaken I NFTs Available
                    </p>
                    <div class="nft-grid" style="max-width: 800px; margin: 0 auto;">
                        <div class="nft-card">
                            <img src="https://ipfs.io/ipfs/bafybeihpsxlj664jp6idz3c5eutxqxcsfoptcjyawckz3ecxz5w7nmauum/Chaos%20Legion%20(21).jpg" class="nft-image" alt="LA1 #271">
                            <div class="nft-info">
                                <div class="nft-name">Chaos Legion</div>
                                <div class="nft-id">#271</div>
                            </div>
                        </div>
                        <div class="nft-card">
                            <img src="https://ipfs.io/ipfs/bafybeihpsxlj664jp6idz3c5eutxqxcsfoptcjyawckz3ecxz5w7nmauum/Chaos%20Legion%20(22).jpg" class="nft-image" alt="LA1 #272">
                            <div class="nft-info">
                                <div class="nft-name">Chaos Legion</div>
                                <div class="nft-id">#272</div>
                            </div>
                        </div>
                        <div class="nft-card">
                            <img src="https://ipfs.io/ipfs/bafybeihpsxlj664jp6idz3c5eutxqxcsfoptcjyawckz3ecxz5w7nmauum/Chaos%20Legion%20(35).jpg" class="nft-image" alt="LA1 #285">
                            <div class="nft-info">
                                <div class="nft-name">Chaos Legion</div>
                                <div class="nft-id">#285</div>
                            </div>
                        </div>
                        <div class="nft-card">
                            <img src="https://ipfs.io/ipfs/bafybeihpsxlj664jp6idz3c5eutxqxcsfoptcjyawckz3ecxz5w7nmauum/Chaos%20Legion%20(66).jpg" class="nft-image" alt="LA1 #316">
                            <div class="nft-info">
                                <div class="nft-name">Chaos Legion</div>
                                <div class="nft-id">#316</div>
                            </div>
                        </div>
                        <div class="nft-card">
                            <img src="https://ipfs.io/ipfs/bafybeihpsxlj664jp6idz3c5eutxqxcsfoptcjyawckz3ecxz5w7nmauum/Chaos%20Vanguard%20(17).jpg" class="nft-image" alt="LA1 #367">
                            <div class="nft-info">
                                <div class="nft-name">Chaos Vanguard</div>
                                <div class="nft-id">#367</div>
                            </div>
                        </div>
                        <div class="nft-card">
                            <img src="https://ipfs.io/ipfs/bafybeihpsxlj664jp6idz3c5eutxqxcsfoptcjyawckz3ecxz5w7nmauum/Chaos%20Vanguard%20(28).jpg" class="nft-image" alt="LA1 #378">
                            <div class="nft-info">
                                <div class="nft-name">Chaos Vanguard</div>
                                <div class="nft-id">#378</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <p style="color: #888; font-size: 12px; margin-top: 20px; font-style: italic; text-align: center;">
                Note: Token prices are fetched automatically from DEXScreener and CoinGecko. Last update: December 27, 2025
            </p>
        </div>

        <!-- ========================================
             SWAP SECTION
        ======================================== -->
        <div class="section-header">
    <h2>
        <span class="icon">üí±</span>
        Swap NFTs ‚áÑ Tokens
    </h2>

    <p class="section-description">
        Swap NFTs for ecosystem tokens ‚Äî or tokens for NFTs ‚Äî using our secure ticket system.
    </p>

    <ul class="section-features">
        <li>Two-way swapping enabled</li>
        <li>Maximum of 3 swaps per user each month</li>
    </ul>
</div>

        <!-- Active Swap Offers -->
        <h3 style="color: #0f0; font-size: 24px; margin-bottom: 20px; padding-left: 10px; border-left: 4px solid #0f0;">
            ‚úÖ Active Swap Offers
        </h3>

        <div class="swap-grid">
            <!-- Legends Awaken I -->
            <div class="swap-card">
                <div class="card-content">
                    <h3>
                        <span class="icon">LA1</span>
                        Legends Awaken I
                    </h3>
                    <div style="margin-top: 10px;">
                        <div class="swap-rate" style="font-size: 18px; margin: 8px 0;">
                            üìÖ December 2025: <span style="color: #ffd700;">$35</span> <span class="token-badge">$CLG</span>
                        </div>
                        <div class="swap-rate" style="font-size: 18px; margin: 8px 0;">
                            üìÖ January 2026: <span style="color: #ffd700;">$40</span> <span class="token-badge">$CLG</span>
                        </div>
                        <div class="swap-rate" style="font-size: 18px; margin: 8px 0;">
                            üìÖ February 2026: <span style="color: #ffd700;">$45</span> <span class="token-badge">$CLG</span>
                        </div>
                        <div class="swap-rate" style="font-size: 18px; margin: 8px 0;">
                            üìÖ March 2026+: <span style="color: #ffd700;">$50</span> <span class="token-badge">$CLG</span>
                        </div>
                    </div>
                    <p style="color: #aaa; font-size: 14px; margin-top: 15px; line-height: 1.6;">
                        Legends Awaken I collection NFT swap with increasing value over time. Subject to changes; continuation after March to be re-evaluated.
                    </p>
                    <button class="swap-btn" onclick="createTicket()" style="font-size: 16px; padding: 15px;">
                        üé´ Create Swap Ticket on Discord
                    </button>
                </div>
            </div>

            <!-- Legends Awaken II - NOW ACTIVE -->
            <div class="swap-card">
                <div class="card-content">
                    <h3>
                        <span class="icon">LA2</span>
                        Legends Awaken II
                    </h3>
                    <div style="margin-top: 10px;">
                        <div class="swap-rate" style="font-size: 18px; margin: 8px 0;">
                            üìÖ January 2026: <span style="color: #ffd700;">$20</span> <span class="token-badge">$CLG</span>
                        </div>
                        <div class="swap-rate" style="font-size: 18px; margin: 8px 0;">
                            üìÖ February 2026: <span style="color: #ffd700;">$25</span> <span class="token-badge">$CLG</span>
                        </div>
                        <div class="swap-rate" style="font-size: 18px; margin: 8px 0;">
                            üìÖ March 2026: <span style="color: #ffd700;">$30</span> <span class="token-badge">$CLG</span>
                        </div>
                        <div class="swap-rate" style="font-size: 18px; margin: 8px 0;">
                            üìÖ April 2026: <span style="color: #ffd700;">$35</span> <span class="token-badge">$CLG</span>
                        </div>
                        <div class="swap-rate" style="font-size: 18px; margin: 8px 0;">
                            üìÖ May 2026+: <span style="color: #ffd700;">$40</span> <span class="token-badge">$CLG</span>
                        </div>
                    </div>
                    <p style="color: #aaa; font-size: 14px; margin-top: 15px; line-height: 1.6;">
                        Legends Awaken II collection NFT swap with increasing value over time. Subject to changes; continuation after May to be re-evaluated.
                    </p>
                    <button class="swap-btn" onclick="createTicket()" style="font-size: 16px; padding: 15px;">
                        üé´ Create Swap Ticket on Discord
                    </button>
                </div>
            </div>

            <!-- Cara Valoria - WITH FULL BACKGROUND IMAGE -->
            <div class="swap-card" style="position: relative; overflow: hidden; aspect-ratio: 1/1; display: flex; flex-direction: column; justify-content: flex-end;">
                <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.25; pointer-events: none; z-index: 0;">
                    <img src="/Images/cara1.png" alt="" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="card-content" style="background: linear-gradient(to top, rgba(26, 26, 46, 0.95) 0%, rgba(26, 26, 46, 0.85) 60%, transparent 100%); padding: 25px;">
                    <h3>
                        <span class="icon">CV</span>
                        Cara Valoria Owner
                    </h3>
                    <div class="swap-rate">1 NFT = <span style="color: #ec4899;">0.005</span> <span class="token-badge">$CARA</span></div>
                    <div style="color: #aaa; font-size: 14px; margin-top: 10px;">
                        Live USD Value: <span id="cara-usd-value" style="color: #00d4ff; font-weight: bold;">Loading...</span>
                    </div>
                    <p style="color: #aaa; font-size: 14px; margin-top: 15px; line-height: 1.6;">
                        Exclusive offer for Cara Valoria holder from Legends Awaken I.
                    </p>
                    <button class="swap-btn" onclick="createTicket()" style="font-size: 16px; padding: 15px;">
                        üé´ Create Swap Ticket on Discord
                    </button>
                </div>
            </div>

            <!-- Lyra NFT Owner - WITH FULL BACKGROUND IMAGE -->
            <div class="swap-card" style="position: relative; overflow: hidden; aspect-ratio: 1/1; display: flex; flex-direction: column; justify-content: flex-end;">
                <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.25; pointer-events: none; z-index: 0;">
                    <img src="/Images/lyralogo.png" alt="" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="card-content" style="background: linear-gradient(to top, rgba(26, 26, 46, 0.95) 0%, rgba(26, 26, 46, 0.85) 60%, transparent 100%); padding: 25px;">
                    <h3>
                        <span class="icon">LY</span>
                        Lyra NFT Owner
                    </h3>
                    <div class="swap-rate">1 NFT = <span style="color: #ef4444;">5,000,000</span> <span class="token-badge">$LYRA</span></div>
                    <div style="color: #aaa; font-size: 14px; margin-top: 10px;">
                        Live USD Value: <span id="lyra-usd-value" style="color: #00d4ff; font-weight: bold;">Loading...</span>
                    </div>
                    <p style="color: #aaa; font-size: 14px; margin-top: 15px; line-height: 1.6;">
                         Exclusive offer for Lyra holder from Legends Awaken II.
                    </p>
                    <button class="swap-btn" onclick="createTicket()" style="font-size: 16px; padding: 15px;">
                        üé´ Create Swap Ticket on Discord
                    </button>
                </div>
            </div>

            <!-- Totems of Power -->
            <div class="swap-card">
                <div class="card-content">
                    <h3>
                        <span class="icon">‚ö°</span>
                        Totems of Power
                    </h3>
                    <div style="margin-top: 10px;">
                        <div class="swap-rate" style="font-size: 16px; margin: 5px 0;">
                            üî• Mythic = <span style="color: #ffd700;">1</span> <span class="token-badge">$CLG</span>
                            <span style="color: #888; font-size: 13px; margin-left: 10px;" id="mythic-usd">($0.00)</span>
                        </div>
                        <div class="swap-rate" style="font-size: 16px; margin: 5px 0;">
                            üíú Epic = <span style="color: #ffd700;">0.5</span> <span class="token-badge">$CLG</span>
                            <span style="color: #888; font-size: 13px; margin-left: 10px;" id="epic-usd">($0.00)</span>
                        </div>
                        <div class="swap-rate" style="font-size: 16px; margin: 5px 0;">
                            üíé Rare = <span style="color: #ffd700;">0.25</span> <span class="token-badge">$CLG</span>
                            <span style="color: #888; font-size: 13px; margin-left: 10px;" id="rare-usd">($0.00)</span>
                        </div>
                    </div>
                    <p style="color: #aaa; font-size: 14px; margin-top: 15px; line-height: 1.6;">
                        Tiered rewards based on Totem rarity from the Totems of Power collection.
                    </p>
                    <button class="swap-btn" onclick="createTicket()" style="font-size: 16px; padding: 15px;">
                        üé´ Create Swap Ticket on Discord
                    </button>
                </div>
            </div>
        </div>

        <!-- Coming Soon Swaps -->
        <h3 style="color: #ffa500; font-size: 24px; margin: 40px 0 20px; padding-left: 10px; border-left: 4px solid #ffa500;">
            üîú Coming Soon
        </h3>

        <div class="swap-grid">
            <!-- Cronus Omni - WITH FULL BACKGROUND IMAGE -->
            <div class="swap-card coming-soon" style="position: relative; overflow: hidden; aspect-ratio: 1/1; display: flex; flex-direction: column; justify-content: flex-end;">
                <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0.25; pointer-events: none; z-index: 0;">
                    <img src="/Images/CronusOmni.png" alt="" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="card-content" style="background: linear-gradient(to top, rgba(26, 26, 46, 0.95) 0%, rgba(26, 26, 46, 0.85) 60%, transparent 100%); padding: 25px;">
                    <h3>
                        <span class="icon">CO</span>
                        Cronus Omni Owner
                    </h3>
                    <div class="swap-rate">1 NFT = <span class="tba">X.XX</span> <span class="token-badge">$CRONUS</span></div>
                    <p style="color: #aaa; font-size: 14px; margin-top: 10px;">
                        Premium rewards for legendary Cronus Omni holders.
                    </p>
                </div>
            </div>

            <!-- Trinari Elderborn -->
            <div class="swap-card coming-soon meteor-card">
                <div class="meteor" style="top: -100px; left: 50%; animation-delay: 0s;"></div>
                <div class="meteor" style="top: -100px; left: 30%; animation-delay: 1s;"></div>
                <div class="meteor" style="top: -100px; left: 70%; animation-delay: 2s;"></div>
                <div class="card-content">
                    <h3>
                        <span class="icon">‚òÑÔ∏è</span>
                        Trinari Elderborn
                    </h3>
                    <div class="swap-rate">Rewards <span class="tba">TBA</span> <span class="token-badge">$TRI</span></div>
                    <p style="color: #aaa; font-size: 14px; margin-top: 10px;">
                        Born from the meteor strike. The first Trinari, ancient and powerful. Token rates to be announced.
                    </p>
                </div>
            </div>
        </div>

        <!-- ========================================
             EARN SECTION
        ======================================== -->
        <div class="section-header" style="margin-top: 80px;">
            <h2>üéÆ Ways to Earn</h2>
            <p>Multiple opportunities to earn tokens and rewards in the Cronos Legends ecosystem.</p>
        </div>

        <!-- Combined Earn Section with Golden Background -->
        <div style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05)); border: 2px solid rgba(255, 215, 0, 0.2); border-radius: 15px; padding: 30px; margin-bottom: 40px;">
            <!-- On-going Opportunities -->
            <h3 style="color: #0f0; font-size: 24px; margin-bottom: 20px; padding-left: 10px; border-left: 4px solid #0f0;">
                üî• Active Now
            </h3>

            <div class="swap-grid">
                <div class="swap-card">
                    <div class="card-content">
                        <h3>
                            <span class="icon">üéÆ</span>
                            Play & Earn Games
                        </h3>
                        <p style="color: #ddd; font-size: 14px; margin-top: 10px; line-height: 1.6;">
                            Participate in Cronos Legends Discord games to earn tokens. 
                        </p>
                    </div>
                </div>

                <div class="swap-card">
                    <div class="card-content">
                        <h3>
                            <span class="icon">üì±</span>
                            Community Engagement
                        </h3>
                        <p style="color: #ddd; font-size: 14px; margin-top: 10px; line-height: 1.6;">
                            Active Discord members, content creators, and community contributors earn rewards. These can be random airdrops given to loyal community members quite randomly, we are constantly watching!
                        </p>
                    </div>
                </div>
            </div>

            <!-- On the Roadmap -->
            <h3 style="color: #ffa500; font-size: 24px; margin: 40px 0 20px; padding-left: 10px; border-left: 4px solid #ffa500;">
                üó∫Ô∏è On the Roadmap
            </h3>

            <div class="swap-grid">
                <div class="swap-card">
                    <div class="card-content">
                        <h3>
                            <span class="icon">üéØ</span>
                            Referral Program
                        </h3>
                        <p style="color: #ddd; font-size: 14px; margin-top: 10px; line-height: 1.6;">
                            Invite new members and earn commission on their purchases and swaps.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        
        <!-- Partner Projects -->
        <div class="section-header" style="margin-top: 80px; background: linear-gradient(135deg, rgba(138, 43, 226, 0.1), rgba(138, 43, 226, 0.05)); border-color: rgba(138, 43, 226, 0.3);">
            <h2 style="color: #BA55D3;">ü§ù Partner Projects</h2>
            <p>Supporting and collaborating with other projects in the Cronos ecosystem.</p>
        </div>

        <div class="swap-grid">
            <!-- Cronus Agent -->
            <div class="swap-card partner-card">
                <div class="card-content">
                    <h3>
                        <span class="icon">ü§ñ</span>
                        Cronus Agent
                    </h3>
                    <p style="color: #ddd; font-size: 14px; margin-top: 10px; line-height: 1.6;">
                        Strategic partnership with Cronus Agent on the Cronos blockchain. Building the future together.
                    </p>
                    <button class="swap-btn" onclick="window.open('https://x.com/CronusAgent', '_blank')" 
                            style="background: linear-gradient(135deg, #1DA1F2, #0d8bd9);">
                        üê¶ Follow @CronusAgent
                    </button>
                </div>
            </div>

            <!-- CroHound -->
            <div class="swap-card partner-card">
                <div class="card-content">
                    <h3>
                        <span class="icon">ü¶¥</span>
                        CroHound GODS
                    </h3>
                    <p style="color: #ddd; font-size: 14px; margin-top: 10px; line-height: 1.6;">
                        Partnership with CroHound GODS ($BONE), supporting the Cronos gaming ecosystem.
                    </p>
                    <button class="swap-btn" onclick="window.open('https://x.com/CroHound_GODS', '_blank')" 
                            style="background: linear-gradient(135deg, #1DA1F2, #0d8bd9);">
                        üê¶ Follow @CroHound_GODS
                    </button>
                </div>
            </div>
        </div>

        <!-- Community Message -->
        <div class="info-box" style="margin-top: 60px; background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 215, 0, 0.05));">
            <h4>üíé Community-Driven Success</h4>
            <p style="color: #ddd; line-height: 1.8; margin-top: 10px;">
                The success of Cronos Legends is built on and driven by our community. 
                Together, we can strive to create something truly legendary. Your participation, feedback, and dedication 
                are what make this ecosystem thrive. 
            </p>
        </div>

        <!-- Information Box -->
        <div class="info-box" style="margin-top: 30px;">
            <h4>üìã How Swapping Works</h4>
            <ul>
                <li>Review available swap rates above</li>
                <li>Click "Create Swap Ticket on Discord"</li>
                <li>Specify which NFT you want to swap and your wallet address</li>
                <li>Our team verifies ownership and processes within 24-48 hours</li>
                <li>Tokens are distributed directly to your wallet</li>
                <li>Values marked as "TBA" will be announced later</li>
            </ul>
        </div>
    </div>

    <!-- Footer - NEW STRUCTURE -->
    <footer class="footer">
        <div class="footer-links">
            <a href="/">Home</a>
            <a href="/legends-awaken-2/">Legends Awaken II</a>
            <a href="/legends-awaken-1/">Legends Awaken I</a>
            <a href="/totems/">Totems</a>
            <a href="/tokens/">Tokens</a>
            <a href="/Earn/">Earn & Swap</a>
            <a href="/game/">Game</a>
            <a href="/roadmap/">Roadmap</a>
            <a href="/faq/">FAQ</a>
            <a href="/la2-terms.html">LA2 Terms</a>
            <a href="/la1-terms.html">LA1 Terms</a>
        </div>
        <p>&copy; 2025 Cronos Legends. All rights reserved.</p>
    </footer>

    <!-- Ethers.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

    <script>
        // ===========================
        // NAVIGATION FUNCTIONS - NEW
        // ===========================
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }

        // Close mobile menu when clicking a link
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', (e) => {
                if (window.innerWidth <= 968) {
                    const navLinks = document.getElementById('navLinks');
                    navLinks.classList.remove('active');
                }
            });
        });

        // Dropdown toggle for mobile
        document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
            toggle.addEventListener('click', (e) => {
                if (window.innerWidth <= 968) {
                    e.preventDefault();
                    const dropdown = e.target.closest('.dropdown');
                    dropdown.classList.toggle('active');
                }
            });
        });

        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // ===========================
        // CONFIGURATION
        // ===========================
        const WALLET_ADDRESS = '0xaf87e4df58d735ec2971d2d8db663b02ca60175d';
        
        const TOKEN_CONTRACTS = {
            CRO: 'NATIVE',
            CLG: '0x08d9cb5100C306C2909B63415d7ff05268633b41',
            TRI: '0xF1F8B074D616796Ae529651a41874246389eC6d3',
            LYRA: '0xb0B1b92e435A00DbB7d486CafFf7C2ba380De9cE',
            CARA: '0x3Caf0136302440Ebb68f41D6c57b7bEbDE9E12ca'
        };

        const PARTNER_CONTRACTS = {
            CRONUS: '0x71b60B37f030D0cff949855b9D0405915057B116',
            BONE: '0x898cD4E6F0a364956e28CB0B51f67a4A0f02589c'
        };

        const OTHER_CONTRACTS = {
            CRONON: '0x50aa2611004B3252030Cc95E9c5A2a44DFED9983',
            WOW: '0xE036fBd7030fCCe540f999b97E60aB16281a6D92',
            FFS: '0xcDEaD50e45f45e7f85a2a53c27C9ea364CcE0366',
            DOM: '0x0CF46f32Af0bBBd211F513B037b1774A8A2f7b5F',
            PAWSFLOW: '0xDf50068a8B84028884C5725613132b2c592baa61'
        };

        const TOKEN_LOGOS = {
            CRONUS: 'https://asset-metadata-service-production.s3.amazonaws.com/asset_icons/aa9f655588d549541d8b9a9cf9993cc02ab65f7f35eeb0f9a8d1c0f63b79ae7f.png',
            BONE: 'https://cdn.dexscreener.com/cms/images/cfb1475025b081ad4815b20f42c9e2ddac64c0a92871ec93fb2bab7e6b6ae3a4?width=64&height=64&fit=crop&quality=95&format=auto'
        };

        const TOKEN_PRICES = {};
        const MANUAL_PRICES = {};

        let TOTAL_VALUE_USD = 0;
        let PARTNER_TOTAL_USD = 0;

        // ===========================
        // PRICE FETCHING
        // ===========================
        async function updateTokenPrices() {
            try {
                const croResponse = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=crypto-com-chain&vs_currencies=usd');
                const croData = await croResponse.json();
                TOKEN_PRICES['CRO'] = croData['crypto-com-chain']?.usd || 0;
                
                const allAddresses = [
                    ...Object.values(TOKEN_CONTRACTS), 
                    ...Object.values(PARTNER_CONTRACTS),
                    ...Object.values(OTHER_CONTRACTS)
                ].filter(addr => addr !== 'NATIVE').join(',');
                const response = await fetch(`https://api.dexscreener.com/latest/dex/tokens/${allAddresses}`);
                const data = await response.json();
                
                if (data.pairs && data.pairs.length > 0) {
                    data.pairs.forEach(pair => {
                        if (pair.chainId === 'cronos') {
                            const baseAddr = pair.baseToken?.address?.toLowerCase();
                            
                            [
                                ...Object.entries(TOKEN_CONTRACTS), 
                                ...Object.entries(PARTNER_CONTRACTS),
                                ...Object.entries(OTHER_CONTRACTS)
                            ].forEach(([symbol, addr]) => {
                                if (addr !== 'NATIVE' && baseAddr === addr.toLowerCase()) {
                                    TOKEN_PRICES[symbol] = parseFloat(pair.priceUsd || 0);
                                    console.log(`üí∞ ${symbol} price: $${TOKEN_PRICES[symbol]}`);
                                }
                            });
                        }
                    });
                }
                
                Object.assign(TOKEN_PRICES, MANUAL_PRICES);
                
                // Update live USD values for swap cards
                updateSwapCardPrices();
                
            } catch (error) {
                console.error('Error fetching prices:', error);
            }
        }

        // ===========================
        // UPDATE SWAP CARD PRICES
        // ===========================
        function updateSwapCardPrices() {
            // Cara Valoria: 0.005 CARA
            if (TOKEN_PRICES['CARA']) {
                const caraValue = 0.005 * TOKEN_PRICES['CARA'];
                document.getElementById('cara-usd-value').textContent = formatUSD(caraValue);
            }
            
            // Lyra: 5,000,000 LYRA
            if (TOKEN_PRICES['LYRA']) {
                const lyraValue = 5000000 * TOKEN_PRICES['LYRA'];
                document.getElementById('lyra-usd-value').textContent = formatUSD(lyraValue);
            }
            
            // Totems: CLG values
            if (TOKEN_PRICES['CLG']) {
                const mythicValue = 1 * TOKEN_PRICES['CLG'];
                const epicValue = 0.5 * TOKEN_PRICES['CLG'];
                const rareValue = 0.25 * TOKEN_PRICES['CLG'];
                
                document.getElementById('mythic-usd').textContent = '(' + formatUSD(mythicValue) + ')';
                document.getElementById('epic-usd').textContent = '(' + formatUSD(epicValue) + ')';
                document.getElementById('rare-usd').textContent = '(' + formatUSD(rareValue) + ')';
            }
        }

        // ===========================
        // BALANCE FETCHING
        // ===========================
        async function updateAllBalances() {
            await updateTokenPrices();
            
            const rpcEndpoints = [
                'https://rpc.vvs.finance',
                'https://evm-cronos.crypto.org',
                'https://cronos-evm.publicnode.com'
            ];
            
            let provider = null;
            for (const rpc of rpcEndpoints) {
                try {
                    provider = new ethers.providers.JsonRpcProvider(rpc);
                    await provider.getNetwork();
                    console.log(`‚úÖ Connected to Cronos via: ${rpc}`);
                    break;
                } catch (error) {
                    console.log(`‚ùå Failed to connect to: ${rpc}`);
                }
            }
            
            if (!provider) {
                console.error('Could not connect to any Cronos RPC');
                return;
            }
            
            let totalUSD = 0;
            let combinedUSD = 0;
            
            try {
                const croBalance = await provider.getBalance(WALLET_ADDRESS);
                const croAmount = parseFloat(ethers.utils.formatEther(croBalance));
                const croValue = croAmount * (TOKEN_PRICES['CRO'] || 0);
                totalUSD += croValue;
                updateBalanceDisplay('CRO', croAmount.toFixed(2) + ' $CRO', croValue);
                
                const abi = [
                    "function balanceOf(address owner) view returns (uint256)",
                    "function decimals() view returns (uint8)"
                ];
                
                for (const [symbol, contractAddress] of Object.entries(TOKEN_CONTRACTS)) {
                    if (contractAddress === 'NATIVE') continue;
                    
                    try {
                        const contract = new ethers.Contract(contractAddress, abi, provider);
                        let decimals = 18;
                        try { decimals = await contract.decimals(); } catch (e) {}
                        
                        const balance = await contract.balanceOf(WALLET_ADDRESS);
                        const amount = parseFloat(ethers.utils.formatUnits(balance, decimals));
                        const usdValue = amount * (TOKEN_PRICES[symbol] || 0);
                        totalUSD += usdValue;
                        
                        updateBalanceDisplay(symbol, amount.toFixed(2) + ' $' + symbol, usdValue);
                    } catch (error) {
                        console.error(`Error fetching ${symbol}:`, error);
                        updateBalanceDisplay(symbol, 'Error', 0);
                    }
                }
                
                const combinedTokensData = [];
                
                for (const [symbol, contractAddress] of Object.entries(PARTNER_CONTRACTS)) {
                    try {
                        const contract = new ethers.Contract(contractAddress, abi, provider);
                        let decimals = 18;
                        try { decimals = await contract.decimals(); } catch (e) {}
                        
                        const balance = await contract.balanceOf(WALLET_ADDRESS);
                        const amount = parseFloat(ethers.utils.formatUnits(balance, decimals));
                        const usdValue = amount * (TOKEN_PRICES[symbol] || 0);
                        combinedUSD += usdValue;
                        
                        combinedTokensData.push({
                            symbol: symbol,
                            amount: amount,
                            usdValue: usdValue,
                            displayAmount: amount.toFixed(2) + ' $' + symbol,
                            displayUSD: formatUSD(usdValue),
                            logo: TOKEN_LOGOS[symbol] || null,
                            isPartner: true,
                            hasPrice: TOKEN_PRICES[symbol] > 0
                        });
                    } catch (error) {
                        console.error(`Error fetching ${symbol}:`, error);
                    }
                }
                
                for (const [symbol, contractAddress] of Object.entries(OTHER_CONTRACTS)) {
                    try {
                        const contract = new ethers.Contract(contractAddress, abi, provider);
                        let decimals = 18;
                        try { decimals = await contract.decimals(); } catch (e) {}
                        
                        const balance = await contract.balanceOf(WALLET_ADDRESS);
                        const amount = parseFloat(ethers.utils.formatUnits(balance, decimals));
                        const usdValue = amount * (TOKEN_PRICES[symbol] || 0);
                        combinedUSD += usdValue;
                        
                        combinedTokensData.push({
                            symbol: symbol,
                            amount: amount,
                            usdValue: usdValue,
                            displayAmount: amount.toFixed(2) + ' $' + symbol,
                            displayUSD: formatUSD(usdValue),
                            logo: null,
                            isPartner: false,
                            hasPrice: TOKEN_PRICES[symbol] > 0
                        });
                    } catch (error) {
                        console.error(`Error fetching ${symbol}:`, error);
                    }
                }
                
                combinedTokensData.sort((a, b) => {
                    if (a.symbol === 'CRONUS') return -1;
                    if (b.symbol === 'CRONUS') return 1;
                    if (a.symbol === 'BONE') return -1;
                    if (b.symbol === 'BONE') return 1;
                    if (!a.hasPrice && b.hasPrice) return 1;
                    if (a.hasPrice && !b.hasPrice) return -1;
                    return b.usdValue - a.usdValue;
                });
                
                const combinedGrid = document.getElementById('combined-tokens-grid');
                combinedGrid.innerHTML = '';
                combinedTokensData.forEach(token => {
                    const item = document.createElement('div');
                    item.className = 'fund-item';
                    item.style.borderColor = 'rgba(147, 51, 234, 0.4)';
                    
                    const labelContent = token.logo 
                        ? `<img src="${token.logo}" class="token-logo" alt="${token.symbol}"> $${token.symbol}`
                        : `$${token.symbol}`;
                    
                    item.innerHTML = `
                        <span class="fund-label" style="color: #9333ea;">${labelContent}</span>
                        <span class="fund-value">${token.displayAmount}</span>
                        <span class="fund-usd" style="color: #9333ea;">${token.displayUSD}</span>
                    `;
                    combinedGrid.appendChild(item);
                });
                
                TOTAL_VALUE_USD = totalUSD;
                PARTNER_TOTAL_USD = combinedUSD;
                
                document.getElementById('total-value').textContent = formatUSD(totalUSD);
                document.getElementById('partner-total-value').textContent = formatUSD(combinedUSD);
                document.getElementById('grand-total-value').textContent = formatUSD(totalUSD + combinedUSD);
                
            } catch (error) {
                console.error('Error fetching balances:', error);
            }
        }

        function updateBalanceDisplay(token, value, usdValue) {
            const element = document.querySelector(`[data-token="${token}"]`);
            if (element) {
                element.querySelector('.fund-value').textContent = value;
                element.querySelector('.fund-usd').textContent = formatUSD(usdValue);
            }
        }

        function formatUSD(value) {
            if (value === 0 || !value) {
                return 'N/A';
            }
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(value);
        }

        // ===========================
        // UI FUNCTIONS
        // ===========================
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                const size = Math.random() * 60 + 20;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                container.appendChild(particle);
            }
        }

        function createTicket() {
            window.open('https://discord.com/channels/1289894046998990900/1306634964590399499', '_blank');
        }

        function openSuggestions() {
            window.open('https://discord.com/channels/1289894046998990900/1293260371758682172', '_blank');
        }

        function viewTreasury() {
            window.open('https://explorer.cronos.org/address/0xaf87e4df58d735ec2971d2d8db663b02ca60175d', '_blank');
        }

        // Initialize
        window.addEventListener('load', () => {
            createParticles();
            updateAllBalances();
            setInterval(updateAllBalances, 30000);
        });
    </script>
</body>
</html>

